<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dual-Theme Tomb Raider Quote App</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --tomb-raider-primary: #4AA8A8; 
            --tomb-raider-secondary: #2F8D8D; 
            --tomb-raider-tertiary: #1A5353;
            --legend-primary: #D4AF37;
            --legend-secondary: #B8860B; 
            --legend-tertiary: #8B6914; 
            --neutral-primary: #6C757D; 
            --neutral-secondary: #495057; 
            --text-light: #F5F5DC; 
            --text-dark: #1a1a2e;
            --bg-dark: #1a1a2e;
            --bg-secondary: #16213e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            transition: all 0.5s ease;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        /* Survivor theme with background image */
        body.theme-survivor {
            background: url('https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWFjNjFwbXo3MTdqZ3Y4dnl5MjcxYWRjOWEyazFka2g5anZjMG0xZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d2W6mhiif8rTBMk0/giphy.gif') center/cover fixed;
        }

        /* Legend theme with background image */
        body.theme-legend {
            background: url('https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExanhxNHo2dHAybDJpazdjNzIwbTJoNnhjdWdoaDM2MGU2cHZvNHBhbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/fNrw3wWHBIPYQZYaZ4/giphy.gif') center/cover fixed;
        }

        .container {
            max-width: 1400px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .main-content {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Enhanced Glassmorphism with more transparency */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 40px;
            background: rgba(10, 8, 6, 0.75); 
            border-radius: 20px;
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(255, 255, 255, 0.15);
            width: 100%;
            max-width: 1000px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--tomb-raider-primary), var(--legend-primary));
            -webkit-background-clip: text;
            background-clip: text;
            font-weight: 700;
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        .theme-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1000px;
        }

        .theme-btn {
            padding: 15px 35px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
            flex: 1;
            max-width: 300px;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .theme-btn.survivor {
            background: linear-gradient(135deg, var(--tomb-raider-primary) 0%, var(--tomb-raider-secondary) 100%);
            color: #0a1a1a;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .theme-btn.legend {
            background: linear-gradient(135deg, var(--legend-primary) 0%, var(--legend-secondary) 100%);
            color: #1a0f08;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .theme-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .theme-btn.active {
            transform: scale(1.05);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.4);
        }

        .theme-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .content-area {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            width: 100%;
            max-width: 1200px;
            margin-bottom: 30px;
        }

        .quote-section {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Enhanced Glassmorphism with more transparency */
        .quote-container {
            background: rgba(15, 12, 10, 0.75); 
            backdrop-filter: blur(25px); 
            border-radius: 20px;
            padding: 50px;
            text-align: center;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.5s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            position: relative;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.theme-survivor .quote-container {
            box-shadow: 0 15px 40px rgba(74, 168, 168, 0.2);
        }

        body.theme-legend .quote-container {
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.2);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            width: 100%;
        }

        .control-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            max-width: 250px;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .new-quote-btn {
            color: var(--text-light);
        }

        /* Dynamic new quote button colors based on theme */
        body.theme-survivor .new-quote-btn {
            background: linear-gradient(135deg, var(--tomb-raider-primary) 0%, var(--tomb-raider-secondary) 100%);
        }

        body.theme-legend .new-quote-btn {
            background: linear-gradient(135deg, var(--legend-primary) 0%, var(--legend-secondary) 100%);
        }

        .auto-toggle {
            background: rgba(108, 117, 125, 0.3);
            color: var(--text-light);
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .control-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Enhanced Glassmorphism with more transparency */
        .projects-sidebar {
            background: rgba(15, 12, 10, 0.75); 
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            height: fit-content;
            position: sticky;
            top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Dynamic subtle glow effects for sidebar */
        body.theme-survivor .projects-sidebar {
            box-shadow: 0 15px 40px rgba(74, 168, 168, 0.15);
        }

        body.theme-legend .projects-sidebar {
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.15);
        }

        .projects-sidebar h3 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.5rem;
            color: var(--text-light);
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 15px;
        }

        /* Dynamic project sidebar title colors */
        body.theme-survivor .projects-sidebar h3 {
            color: var(--tomb-raider-primary);
        }

        body.theme-legend .projects-sidebar h3 {
            color: var(--legend-primary);
        }

        .project-links {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .project-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .project-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-3px);
        }

        body.theme-survivor .project-item:hover {
            box-shadow: 0 6px 20px rgba(74, 168, 168, 0.15);
        }

        body.theme-legend .project-item:hover {
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.15);
        }

        .project-item p {
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 1rem;
            color: var(--text-light);
        }

        .project-item strong {
            color: var(--text-light);
            font-size: 1.1rem;
            display: block;
            margin-bottom: 8px;
        }

        .demo-link {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--neutral-primary) 0%, var(--neutral-secondary) 100%);
            border-radius: 8px;
            text-decoration: none;
            color: #FFFFFF;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 0.95rem;
            border: none;
            width: 100%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .demo-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            color: #FFFFFF;
            text-decoration: none;
            background: linear-gradient(135deg, var(--neutral-secondary) 0%, var(--neutral-primary) 100%);
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 12, 10, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .spinner {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        /* Dynamic spinner colors based on theme */
        body.theme-survivor .spinner {
            border: 6px solid rgba(47, 141, 141, 0.3);
            border-top: 6px solid var(--tomb-raider-primary);
        }

        body.theme-legend .spinner {
            border: 6px solid rgba(184, 134, 11, 0.3);
            border-top: 6px solid var(--legend-primary);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .quote-text {
            font-size: 1.8rem;
            line-height: 1.7;
            margin-bottom: 20px;
            font-style: italic;
            position: relative;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        .quote-text::before, .quote-text::after {
            content: '"';
            font-size: 2.5rem;
            opacity: 0.8;
        }

        .quote-author {
            font-size: 1.4rem;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        /* Dynamic author colors based on theme */
        body.theme-survivor .quote-author {
            color: var(--tomb-raider-primary);
        }

        body.theme-legend .quote-author {
            color: var(--legend-primary);
        }

        .quote-game {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 8px;
            font-style: italic;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.7);
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            font-size: 1rem;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 12px;
            width: 100%;
            max-width: 1000px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Glassmorphism with more transparency */
        .footer {
            text-align: center;
            margin-top: 50px;
            font-size: 1rem;
            background: rgba(10, 8, 6, 0.75); 
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(15px);
            width: 100%;
            max-width: 1000px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .footer p {
            margin-bottom: 12px;
        }

        .copyright-disclaimer {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-top: 20px;
            line-height: 1.6;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .footer a {
            color: var(--neutral-primary);
            text-decoration: none;
            transition: color 0.3s ease;
            font-weight: 500;
        }

        .footer a:hover {
            text-decoration: underline;
            color: var(--neutral-secondary);
        }

        .fade-in {
            animation: fadeIn 1s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .error-message {
            color: #ff6b6b;
            text-align: center;
            padding: 15px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 10px;
            margin: 15px 0;
            text-shadow: none;
            border: 1px solid rgba(255, 107, 107, 0.3);
            width: 100%;
            max-width: 1000px;
            backdrop-filter: blur(10px);
        }

        /* GIPHY Attribution */
        .giphy-attribution {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            z-index: 100;
            backdrop-filter: blur(5px);
            max-width: 200px;
        }

        .giphy-attribution a {
            color: #00ff99;
            text-decoration: none;
        }

        .giphy-attribution a:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                max-width: 1100px;
            }
            
            .main-content {
                max-width: 1000px;
            }
            
            .content-area {
                max-width: 1000px;
            }
        }

        @media (max-width: 1024px) {
            .content-area {
                grid-template-columns: 1fr;
                gap: 25px;
                max-width: 800px;
            }
            
            .projects-sidebar {
                position: static;
                order: 2;
            }
            
            .quote-section {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .header {
                padding: 25px 20px;
                margin-bottom: 30px;
            }
            
            .header h1 {
                font-size: 2.3rem;
            }
            
            .quote-text {
                font-size: 1.5rem;
            }
            
            .theme-btn, .control-btn {
                padding: 12px 25px;
                font-size: 1rem;
            }
            
            .quote-container {
                padding: 35px 25px;
                min-height: 300px;
            }
            
            .projects-sidebar {
                padding: 25px 20px;
            }
            
            .project-item {
                padding: 18px;
            }
            
            .giphy-attribution {
                position: static;
                margin-top: 20px;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .quote-text {
                font-size: 1.3rem;
            }
            
            .theme-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .theme-btn, .control-btn {
                width: 100%;
                max-width: none;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .stats {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .projects-sidebar h3 {
                font-size: 1.3rem;
            }
            
            .project-item p {
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body class="theme-survivor">
    <div class="container">
        <div class="main-content">
            <div class="header">
                <h1>Tomb Raider Quote Generator</h1>
                <p>Explore quotes from two iconic Tomb Raider timelines</p>
            </div>
            
            <div class="theme-selector">
                <button class="theme-btn survivor active" id="survivorTheme">
                    <i class="fas fa-mountain"></i> Survivor Timeline
                </button>
                <button class="theme-btn legend" id="legendTheme">
                    <i class="fas fa-crown"></i> Legend Timeline
                </button>
            </div>
            
            <div class="content-area">
                <div class="quote-section">
                    <div class="quote-container">
                        <div class="loading-overlay" id="loadingOverlay">
                            <div class="spinner"></div>
                            <p>Loading quotes...</p>
                        </div>
                        <div class="quote-text fade-in" id="quoteText">
                            I'm done searching. I want to be around the living.
                        </div>
                        <div class="quote-author fade-in" id="quoteAuthor">
                            ‚Äî Lara Croft | Shadow of the Tomb Raider
                        </div>
                        <div class="quote-game fade-in" id="quoteGame"></div>
                    </div>
                    
                    <div class="controls">
                        <button class="control-btn new-quote-btn" id="newQuote">
                            <span>üîÑ</span> New Quote
                        </button>
                        <button class="control-btn auto-toggle" id="autoToggle">
                            <span>‚è∏Ô∏è</span> Pause Auto
                        </button>
                    </div>
                </div>
                
                <div class="projects-sidebar">
                    <h3>Other Quote Generator Apps</h3>
                    <div class="project-links">
                        <div class="project-item">
                            <strong>Rome Total War (2004) | The Original App</strong>
                            <p>Quotes from the loading screens of the classic strategy game Rome Total War.</p>
                            <a href="https://mahen-mahindaratne.github.io/random-quote-generator-rome-total-war/index.html" class="demo-link" target="_blank">Live App</a>
                        </div>
                        <div class="project-item">
                            <strong>Reflections from Ancient Rome</strong>
                            <p>An app inspired by the life and times of Maximus Decimus Meridius, Commander of the Armies of the North, General of the Felix Legions and loyal servant to the true emperor, Marcus Aurelius..., Gladiator (2000).</p>
                            <a href="https://mahen-mahindaratne.github.io/random-quote-generator-rome/index.html" class="demo-link" target="_blank">Live App</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats">
                <div>Total Quotes: <span id="totalQuotes">0</span></div>
                <div>Current Theme: <span id="currentTheme">Survivor Timeline</span></div>
            </div>
            
            <footer class="footer">
                <p>¬© 2025 Mahen Mahindaratne | All rights reserved</p>
                <p class="copyright-disclaimer">
                    This application uses quotes from various sources for educational and inspirational purposes.
                    All quotes remain the intellectual property of their respective authors and creators.
                    Background GIFs provided by GIPHY under their Terms of Service.
                </p>
            </footer>
        </div>
    </div>
    
    <!-- GIPHY Attribution -->
    <div class="giphy-attribution">
        GIFs by <a href="https://giphy.com/" target="_blank">GIPHY</a>
    </div>
    
    <script>
    // Global variables
    let currentTheme = 'survivor';
    let currentQuotes = [];
    let autoInterval = null;
    let isAutoEnabled = true;
    
    // DOM elements
    const quoteText = document.getElementById('quoteText');
    const quoteAuthor = document.getElementById('quoteAuthor');
    const quoteGame = document.getElementById('quoteGame');
    const survivorThemeBtn = document.getElementById('survivorTheme');
    const legendThemeBtn = document.getElementById('legendTheme');
    const newQuoteBtn = document.getElementById('newQuote');
    const autoToggleBtn = document.getElementById('autoToggle');
    const totalQuotesSpan = document.getElementById('totalQuotes');
    const currentThemeSpan = document.getElementById('currentTheme');
    const loadingOverlay = document.getElementById('loadingOverlay');
    
    // JSON file paths
    const quoteFiles = {
        'survivor': 'data/quotes-survivor.json',
        'legend': 'data/quotes-legend.json'
    };

    // Fallback quotes in case JSON files fail to load
    const fallbackQuotes = {
        'survivor': [
            {
                content: "What makes someone reach beyond the boundaries of human experience... to face the unknown? As children, we question the world around us. We learn, we accept, and gradually, we lose our capacity for wonder. But some do not‚Äîthe explorers, the seekers of truth. It is these pioneers who define the future of mankind",
                author: "Lord Richard James Croft",
                game: "Rise of the Tomb Raider"
            },
            {
                content: "I'm done searching. I want to be around the living.",
                author: "Lara Croft",
                game: "Shadow of the Tomb Raider"
            },
            {
                content: "A famous explorer once said that the extraordinary is in what we do, not who we are.",
                author: "Lara Croft",
                game: "Tomb Raider (2013)"
            }
        ],
        'legend': [
            {
                content: "You'll be amazed how persuasive I can be. Even with dangerous men.",
                author: "Lara Croft to Toru Nishimura",
                game: "Tomb Raider: Legend"
            },
            {
                content: "Which is precisely why I've come to you Miss Croft. This is a game you've played before.",
                author: "Jacqueline Natla",
                game: "Tomb Raider: Anniversary"
            }, 
            {
                content: "I need Thor's belt to get to his hammer, and i need his hammer to kill a god",
                author: "Lara Croft",
                game: "Tomb Raider: Underworld"
            }
        ]
    };

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
        loadQuotes('survivor');
        setupEventListeners();
        preloadImages();
    });
    
    // Image preloading for smooth transitions
    const themeImages = {
        'survivor': 'https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExOG54a3g3emN4bmtpaDN3aGhmbjlyN3JudnFmdWtsanFjMml4M3R3ZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KHY2nlU0WTXQk/giphy.gif', 
        'legend': 'https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExY2M0b3ZraThvMnRnangzNmJocnRkYzE0NnBqM2F5Y2I2MDNtanpubCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/icGEbooVxl3jeFDB58/giphy.gif'
    };

    // Preload background images
    function preloadImages() {
        Object.values(themeImages).forEach(src => {
            const img = new Image();
            img.src = src;
        });
    }
    
    // Set up event listeners
    function setupEventListeners() {
        survivorThemeBtn.addEventListener('click', () => switchTheme('survivor'));
        legendThemeBtn.addEventListener('click', () => switchTheme('legend'));
        newQuoteBtn.addEventListener('click', displayRandomQuote);
        autoToggleBtn.addEventListener('click', toggleAutoQuote);
    }
    
    // Load quotes from JSON file with proper error handling
    async function loadQuotes(theme) {
        try {
            showLoading();
            disableButtons();
            
            const response = await fetch(quoteFiles[theme]);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const quotes = await response.json();
            
            // Validate the JSON structure
            if (!Array.isArray(quotes)) {
                throw new Error('Invalid JSON format: expected an array');
            }
            
            // Validate each quote has required fields
            const validQuotes = quotes.filter(quote => 
                quote.content && quote.author && quote.game
            );
            
            if (validQuotes.length === 0) {
                throw new Error('No valid quotes found in JSON file');
            }
            
            currentQuotes = validQuotes;
            currentTheme = theme;
            
            updateUI();
            displayRandomQuote();
            hideLoading();
            enableButtons();
            
            if (isAutoEnabled && !autoInterval) {
                startAutoQuote();
            }
            
        } catch (error) {
            console.error('Error loading quotes from JSON:', error);
            showError(`Failed to load ${theme} quotes from JSON. Using fallback data.`);
            // Use fallback quotes if JSON loading fails
            currentQuotes = fallbackQuotes[theme] || fallbackQuotes.survivor;
            currentTheme = theme;
            
            updateUI();
            displayRandomQuote();
            hideLoading();
            enableButtons();
            
            if (isAutoEnabled && !autoInterval) {
                startAutoQuote();
            }
        }
    }
    
    // Switch between themes
    function switchTheme(theme) {
        if (theme === currentTheme) return;
        
        // Update active button
        survivorThemeBtn.classList.remove('active');
        legendThemeBtn.classList.remove('active');
        
        if (theme === 'survivor') {
            survivorThemeBtn.classList.add('active');
            document.body.className = 'theme-survivor';
        } else if (theme === 'legend') {
            legendThemeBtn.classList.add('active');
            document.body.className = 'theme-legend';
        }
        
        // Stop auto rotation during theme switch
        if (autoInterval) {
            clearInterval(autoInterval);
            autoInterval = null;
        }
        
        // Load new quotes
        loadQuotes(theme);
    }
    
    // Display a random quote
    function displayRandomQuote() {
        if (currentQuotes.length === 0) {
            quoteText.textContent = "No quotes available.";
            quoteAuthor.textContent = "";
            quoteGame.textContent = "";
            return;
        }
        
        const randomIndex = Math.floor(Math.random() * currentQuotes.length);
        const quote = currentQuotes[randomIndex];
        
        // Add fade animation
        quoteText.classList.remove('fade-in');
        quoteAuthor.classList.remove('fade-in');
        quoteGame.classList.remove('fade-in');
        
        setTimeout(() => {
            quoteText.textContent = quote.content;
            quoteAuthor.textContent = `‚Äî ${quote.author}`;
            
            if (quote.game) {
                quoteGame.textContent = quote.game;
            } else {
                quoteGame.textContent = "";
            }
            
            quoteText.classList.add('fade-in');
            quoteAuthor.classList.add('fade-in');
            quoteGame.classList.add('fade-in');
        }, 300);
    }
    
    // Start automatic quote rotation
    function startAutoQuote() {
        if (autoInterval) {
            clearInterval(autoInterval);
        }
        
        autoInterval = setInterval(displayRandomQuote, 8000); // Change quote every 8 seconds
        autoToggleBtn.innerHTML = '<span>‚è∏Ô∏è</span> Pause Auto';
        isAutoEnabled = true;
    }
    
    // Toggle automatic quote rotation
    function toggleAutoQuote() {
        if (isAutoEnabled) {
            // Pause auto rotation
            if (autoInterval) {
                clearInterval(autoInterval);
                autoInterval = null;
            }
            autoToggleBtn.innerHTML = '<span>‚ñ∂Ô∏è</span> Resume Auto';
            isAutoEnabled = false;
        } else {
            // Resume auto rotation
            startAutoQuote();
        }
    }
    
    // Update UI elements
    function updateUI() {
        totalQuotesSpan.textContent = currentQuotes.length;
        
        // Update theme display text
        if (currentTheme === 'survivor') {
            currentThemeSpan.textContent = 'Survivor Timeline';
        } else if (currentTheme === 'legend') {
            currentThemeSpan.textContent = 'Legend Timeline';
        }
    }
    
    // Show loading state
    function showLoading() {
        loadingOverlay.style.display = 'flex';
        quoteText.style.opacity = '0.5';
        quoteAuthor.style.opacity = '0.5';
        quoteGame.style.opacity = '0.5';
    }
    
    // Hide loading state
    function hideLoading() {
        loadingOverlay.style.display = 'none';
        quoteText.style.opacity = '1';
        quoteAuthor.style.opacity = '1';
        quoteGame.style.opacity = '1';
    }
    
    // Disable buttons during loading
    function disableButtons() {
        survivorThemeBtn.disabled = true;
        legendThemeBtn.disabled = true;
        newQuoteBtn.disabled = true;
        autoToggleBtn.disabled = true;
    }
    
    // Enable buttons after loading
    function enableButtons() {
        survivorThemeBtn.disabled = false;
        legendThemeBtn.disabled = false;
        newQuoteBtn.disabled = false;
        autoToggleBtn.disabled = false;
    }
    
    // Show error message
    function showError(message) {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'error-message';
        errorDiv.textContent = message;
        
        // Insert after theme selector
        document.querySelector('.theme-selector').after(errorDiv);
        
        // Remove error message after 5 seconds
        setTimeout(() => {
            if (errorDiv.parentNode) {
                errorDiv.parentNode.removeChild(errorDiv);
            }
        }, 5000);
    }
    </script>
</body>

</html>

